<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Image Gallery</title>
	<link href="css/tool_base.css" type="text/css" rel="stylesheet" media="all" />
	<link href="css/tool.css" type="text/css" rel="stylesheet" media="all" />
	<link href="css/image-gallery.css" rel="stylesheet" type="text/css" />
    <link href="fluid-components/css/fluid.reset.css" rel="stylesheet" type="text/css" />
    <link href="fluid-components/css/fluid.components.uploader.css" rel="stylesheet" type="text/css" />
    <link href="fluid-components/css/fluid.layout.css" rel="stylesheet" type="text/css" />
    
    <script src="fluid-components/js/jquery/jquery-1.3.1.js" type="text/javascript"></script>
	<script src="fluid-components/js/jquery/jquery.keyboard-a11y.js" type="text/javascript"></script>
    <script src="fluid-components/js/jquery/jARIA.js" type="text/javascript"></script>
    <script src="fluid-components/js/swfupload/swfobject.js" type="text/javascript"></script>
	<script src="fluid-components/js/swfupload/swfupload.js" type="text/javascript"></script>
	<script src="fluid-components/js/fluid/Fluid.js" type="text/javascript"></script>
    <script src="fluid-components/js/fluid/ProgressiveEnhancement.js" type="text/javascript"></script>
    
    <!-- Uploader dependencies -->
    <script src="fluid-components/js/fluid/uploader/FileQueue.js" type="text/javascript"></script>
    <script src="fluid-components/js/fluid/uploader/SWFUploadManager.js" type="text/javascript"></script>
    <script src="fluid-components/js/fluid/uploader/Scroller.js" type="text/javascript"></script>
    <script src="fluid-components/js/fluid/uploader/Progress.js" type="text/javascript"></script>
    <script src="fluid-components/js/fluid/uploader/Uploader.js" type="text/javascript"></script>
</head>
<body>

<div class="portletBody specialLink">
	<ul role="menu" class="navIntraTool actionToolBar">
		<li role="menuitem" class="firstToolBarItem"><span><a rsf:id="browseImages-link" href="BrowseImages.html">Browse Images &amp; Collections</a></span></li>
		<li role="menuitem">Add Images</li>
	</ul>

	<ol id="step-indicator">
		<li class="active-step">Choose Images</li>
		<li class="inactive-step">Add Information to Images</li>
	</ol>

    
    <div>Upload images from your Computer to <em>All Images</em></div>
    <!-- Uploader will be injected in here. -->
    <div id="uploader"></div>
    
    <script type="text/javascript">
        var myUpload;
        jQuery(function () {
            jQuery("#uploader").load("../../fluid-components/html/templates/Uploader.html #uploader-contents", null, function () {
                
                // Add the form actions.
                jQuery(".fl-uploader").attr("action", "site/AddInformationToImages");
                jQuery(".fl-progressive-enhanceable").attr("action", "site/singleFileUpload");
                
                // Initialize the Uploader.
                myUpload = fluid.progressiveEnhanceableUploader(".fl-uploader", ".fl-progressive-enhanceable", {
                    uploadManager: {
                        type: "fluid.swfUploadManager",
                            
                        options: {
                            flashURL: "../../fluid-components/flash/swfupload.swf",
                            uploadURL: "../../site/multiFileUpload",
                            fileTypes: "*.gif;*.jpeg;*.jpg;*.png;*.tiff",
                            debug: true
                        },
                        
                        listeners: {
                            afterFileUploaded: function (file, serverData){
                 				// Keep track of what's been added in this go-round so that those
                				// images can be shown on the next page. (Alternatively, you
                				// might set up another panel on this page to accumulate thumbnails
                				// as each file is successfully consumed.)
                				jQuery('#new-image-form').append('<input type="hidden" name="imageIds" value="' + 
                                                                 serverResponse + '"/>');
                            },
                            
                            afterUploadComplete: function () {
                                jQuery(".fl-uploader").submit();
                            }
                        }
                    },
                    
                    decorators: {
                        type: "fluid.swfUploadSetupDecorator",
                        options: {
                            flashButtonImageURL: "../../fluid-components/images/uploader/browse.png"
                        }
                    }
                });
            });
        });
    </script>
</div>

</body>
</html>
